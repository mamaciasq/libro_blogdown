<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>blogdown: Creación de sitios web con R Markdown</title>
  <meta name="description" content="Un guía para crear sitios web con R Markdown y el paquete blogdown de R.">
  <meta name="generator" content="bookdown 0.7 and GitBook 2.6.7">

  <meta property="og:title" content="blogdown: Creación de sitios web con R Markdown" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://bookdown.org/yihui/blogdown/" />
  <meta property="og:image" content="https://bookdown.org/yihui/blogdown/images/cover.png" />
  <meta property="og:description" content="Un guía para crear sitios web con R Markdown y el paquete blogdown de R." />
  <meta name="github-repo" content="rstudio/blogdown" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="blogdown: Creación de sitios web con R Markdown" />
  
  <meta name="twitter:description" content="Un guía para crear sitios web con R Markdown y el paquete blogdown de R." />
  <meta name="twitter:image" content="https://bookdown.org/yihui/blogdown/images/cover.png" />

<meta name="author" content="Yihui Xie, Amber Thomas, Alison Presmanes Hill">


<meta name="date" content="2018-03-30">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="other-generators.html">
<link rel="next" href="hexo.html">
<script src="libs/jquery/jquery.min.js"></script>
<link href="libs/gitbook/css/style.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; position: absolute; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; }
pre.numberSource a.sourceLine:empty
  { position: absolute; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: absolute; left: -5em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="css/style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Creación de sitios web con R Markdown</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Prefacio</a><ul>
<li class="chapter" data-level="" data-path="estructura-del-libro.html"><a href="estructura-del-libro.html"><i class="fa fa-check"></i>Estructura del libro</a></li>
<li class="chapter" data-level="" data-path="software-info.html"><a href="software-info.html"><i class="fa fa-check"></i>Información de Software y convenciones</a></li>
<li class="chapter" data-level="" data-path="agradecimientos.html"><a href="agradecimientos.html"><i class="fa fa-check"></i>Agradecimientos</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="author.html"><a href="author.html"><i class="fa fa-check"></i>Sobre los autores</a><ul>
<li class="chapter" data-level="" data-path="yihui-xie.html"><a href="yihui-xie.html"><i class="fa fa-check"></i>Yihui Xie</a></li>
<li class="chapter" data-level="" data-path="amber-thomas.html"><a href="amber-thomas.html"><i class="fa fa-check"></i>Amber Thomas</a></li>
<li class="chapter" data-level="" data-path="alison-presmanes-hill.html"><a href="alison-presmanes-hill.html"><i class="fa fa-check"></i>Alison Presmanes Hill</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="comienzo.html"><a href="comienzo.html"><i class="fa fa-check"></i><b>1</b> Comienzo</a><ul>
<li class="chapter" data-level="1.1" data-path="instalacion.html"><a href="instalacion.html"><i class="fa fa-check"></i><b>1.1</b> Instalación</a><ul>
<li class="chapter" data-level="1.1.1" data-path="instalacion.html"><a href="instalacion.html#actualizacion"><i class="fa fa-check"></i><b>1.1.1</b> Actualización</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="un-ejemplo-rapido.html"><a href="un-ejemplo-rapido.html"><i class="fa fa-check"></i><b>1.2</b> Un ejemplo rápido</a></li>
<li class="chapter" data-level="1.3" data-path="rstudio-ide.html"><a href="rstudio-ide.html"><i class="fa fa-check"></i><b>1.3</b> RStudio IDE</a></li>
<li class="chapter" data-level="1.4" data-path="opciones-globales.html"><a href="opciones-globales.html"><i class="fa fa-check"></i><b>1.4</b> Opciones globales</a></li>
<li class="chapter" data-level="1.5" data-path="output-format.html"><a href="output-format.html"><i class="fa fa-check"></i><b>1.5</b> R Markdown vs. Markdown</a></li>
<li class="chapter" data-level="1.6" data-path="otros-temas.html"><a href="otros-temas.html"><i class="fa fa-check"></i><b>1.6</b> Otros temas</a></li>
<li class="chapter" data-level="1.7" data-path="workflow.html"><a href="workflow.html"><i class="fa fa-check"></i><b>1.7</b> Un flujo de trabajo recomendado</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="hugo.html"><a href="hugo.html"><i class="fa fa-check"></i><b>2</b> Hugo</a><ul>
<li class="chapter" data-level="2.1" data-path="static-sites.html"><a href="static-sites.html"><i class="fa fa-check"></i><b>2.1</b> Sitios estáticos y Hugo</a></li>
<li class="chapter" data-level="2.2" data-path="configuracion.html"><a href="configuracion.html"><i class="fa fa-check"></i><b>2.2</b> Configuración</a><ul>
<li class="chapter" data-level="2.2.1" data-path="configuracion.html"><a href="configuracion.html#sintaxis-toml"><i class="fa fa-check"></i><b>2.2.1</b> Sintaxis TOML</a></li>
<li class="chapter" data-level="2.2.2" data-path="configuracion.html"><a href="configuracion.html#opciones"><i class="fa fa-check"></i><b>2.2.2</b> Opciones</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="contenido.html"><a href="contenido.html"><i class="fa fa-check"></i><b>2.3</b> Contenido</a><ul>
<li class="chapter" data-level="2.3.1" data-path="contenido.html"><a href="contenido.html#metadatos-yaml"><i class="fa fa-check"></i><b>2.3.1</b> Metadatos YAML</a></li>
<li class="chapter" data-level="2.3.2" data-path="contenido.html"><a href="contenido.html#cuerpo"><i class="fa fa-check"></i><b>2.3.2</b> Cuerpo</a></li>
<li class="chapter" data-level="2.3.3" data-path="contenido.html"><a href="contenido.html#codigo-corto"><i class="fa fa-check"></i><b>2.3.3</b> Código corto</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="temas.html"><a href="temas.html"><i class="fa fa-check"></i><b>2.4</b> Temas</a><ul>
<li class="chapter" data-level="2.4.1" data-path="temas.html"><a href="temas.html#el-tema-por-defecto"><i class="fa fa-check"></i><b>2.4.1</b> El tema por defecto</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="plantillas.html"><a href="plantillas.html"><i class="fa fa-check"></i><b>2.5</b> Plantillas</a><ul>
<li class="chapter" data-level="2.5.1" data-path="plantillas.html"><a href="plantillas.html#un-pequeno-ejemplo"><i class="fa fa-check"></i><b>2.5.1</b> Un pequeño ejemplo</a></li>
<li class="chapter" data-level="2.5.2" data-path="plantillas.html"><a href="plantillas.html#how-to"><i class="fa fa-check"></i><b>2.5.2</b> Implementando más funciones</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="layouts-personalizados.html"><a href="layouts-personalizados.html"><i class="fa fa-check"></i><b>2.6</b> Layouts personalizados</a></li>
<li class="chapter" data-level="2.7" data-path="archivos-estaticos.html"><a href="archivos-estaticos.html"><i class="fa fa-check"></i><b>2.7</b> Archivos estáticos</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="implementacion.html"><a href="implementacion.html"><i class="fa fa-check"></i><b>3</b> Implementación</a><ul>
<li class="chapter" data-level="3.1" data-path="netlify.html"><a href="netlify.html"><i class="fa fa-check"></i><b>3.1</b> Netlify</a></li>
<li class="chapter" data-level="3.2" data-path="updog.html"><a href="updog.html"><i class="fa fa-check"></i><b>3.2</b> Updog</a></li>
<li class="chapter" data-level="3.3" data-path="github-pages.html"><a href="github-pages.html"><i class="fa fa-check"></i><b>3.3</b> GitHub Pages</a></li>
<li class="chapter" data-level="3.4" data-path="travis-github.html"><a href="travis-github.html"><i class="fa fa-check"></i><b>3.4</b> Travis + GitHub</a></li>
<li class="chapter" data-level="3.5" data-path="gitlab-pages.html"><a href="gitlab-pages.html"><i class="fa fa-check"></i><b>3.5</b> GitLab Pages</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="migration.html"><a href="migration.html"><i class="fa fa-check"></i><b>4</b> Migration</a><ul>
<li class="chapter" data-level="4.1" data-path="from-jekyll.html"><a href="from-jekyll.html"><i class="fa fa-check"></i><b>4.1</b> From Jekyll</a></li>
<li class="chapter" data-level="4.2" data-path="from-wordpress.html"><a href="from-wordpress.html"><i class="fa fa-check"></i><b>4.2</b> From WordPress</a></li>
<li class="chapter" data-level="4.3" data-path="from-other-systems.html"><a href="from-other-systems.html"><i class="fa fa-check"></i><b>4.3</b> From other systems</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="other-generators.html"><a href="other-generators.html"><i class="fa fa-check"></i><b>5</b> Other Generators</a><ul>
<li class="chapter" data-level="5.1" data-path="jekyll.html"><a href="jekyll.html"><i class="fa fa-check"></i><b>5.1</b> Jekyll</a></li>
<li class="chapter" data-level="5.2" data-path="hexo.html"><a href="hexo.html"><i class="fa fa-check"></i><b>5.2</b> Hexo</a></li>
<li class="chapter" data-level="5.3" data-path="rmd-website.html"><a href="rmd-website.html"><i class="fa fa-check"></i><b>5.3</b> Default site generator in rmarkdown</a></li>
<li class="chapter" data-level="5.4" data-path="pkgdown.html"><a href="pkgdown.html"><i class="fa fa-check"></i><b>5.4</b> pkgdown</a></li>
</ul></li>
<li class="appendix"><span><b>Appendix</b></span></li>
<li class="chapter" data-level="A" data-path="r-markdown.html"><a href="r-markdown.html"><i class="fa fa-check"></i><b>A</b> R Markdown</a></li>
<li class="chapter" data-level="B" data-path="website-basics.html"><a href="website-basics.html"><i class="fa fa-check"></i><b>B</b> Website Basics</a><ul>
<li class="chapter" data-level="B.1" data-path="html.html"><a href="html.html"><i class="fa fa-check"></i><b>B.1</b> HTML</a></li>
<li class="chapter" data-level="B.2" data-path="css.html"><a href="css.html"><i class="fa fa-check"></i><b>B.2</b> CSS</a></li>
<li class="chapter" data-level="B.3" data-path="javascript.html"><a href="javascript.html"><i class="fa fa-check"></i><b>B.3</b> JavaScript</a></li>
<li class="chapter" data-level="B.4" data-path="useful-resources.html"><a href="useful-resources.html"><i class="fa fa-check"></i><b>B.4</b> Useful resources</a><ul>
<li class="chapter" data-level="B.4.1" data-path="useful-resources.html"><a href="useful-resources.html#file-optimization"><i class="fa fa-check"></i><b>B.4.1</b> File optimization</a></li>
<li class="chapter" data-level="B.4.2" data-path="useful-resources.html"><a href="useful-resources.html#helping-people-find-your-site"><i class="fa fa-check"></i><b>B.4.2</b> Helping people find your site</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="C" data-path="domain-name.html"><a href="domain-name.html"><i class="fa fa-check"></i><b>C</b> Domain Name</a><ul>
<li class="chapter" data-level="C.1" data-path="registration.html"><a href="registration.html"><i class="fa fa-check"></i><b>C.1</b> Registration</a></li>
<li class="chapter" data-level="C.2" data-path="nameservers.html"><a href="nameservers.html"><i class="fa fa-check"></i><b>C.2</b> Nameservers</a></li>
<li class="chapter" data-level="C.3" data-path="dns-records.html"><a href="dns-records.html"><i class="fa fa-check"></i><b>C.3</b> DNS records</a></li>
</ul></li>
<li class="chapter" data-level="D" data-path="advanced-topics.html"><a href="advanced-topics.html"><i class="fa fa-check"></i><b>D</b> Advanced Topics</a><ul>
<li class="chapter" data-level="D.1" data-path="more-global-options.html"><a href="more-global-options.html"><i class="fa fa-check"></i><b>D.1</b> More global options</a></li>
<li class="chapter" data-level="D.2" data-path="livereload.html"><a href="livereload.html"><i class="fa fa-check"></i><b>D.2</b> LiveReload</a></li>
<li class="chapter" data-level="D.3" data-path="local-preview.html"><a href="local-preview.html"><i class="fa fa-check"></i><b>D.3</b> Building a website for local preview</a></li>
<li class="chapter" data-level="D.4" data-path="functions.html"><a href="functions.html"><i class="fa fa-check"></i><b>D.4</b> Functions in the blogdown package</a><ul>
<li class="chapter" data-level="D.4.1" data-path="functions.html"><a href="functions.html#exported-functions"><i class="fa fa-check"></i><b>D.4.1</b> Exported functions</a></li>
<li class="chapter" data-level="D.4.2" data-path="functions.html"><a href="functions.html#non-exported-functions"><i class="fa fa-check"></i><b>D.4.2</b> Non-exported functions</a></li>
</ul></li>
<li class="chapter" data-level="D.5" data-path="dep-path.html"><a href="dep-path.html"><i class="fa fa-check"></i><b>D.5</b> Paths of figures and other dependencies</a></li>
<li class="chapter" data-level="D.6" data-path="html-widgets.html"><a href="html-widgets.html"><i class="fa fa-check"></i><b>D.6</b> HTML widgets</a></li>
<li class="chapter" data-level="D.7" data-path="version-control.html"><a href="version-control.html"><i class="fa fa-check"></i><b>D.7</b> Version control</a></li>
<li class="chapter" data-level="D.8" data-path="default-template.html"><a href="default-template.html"><i class="fa fa-check"></i><b>D.8</b> The default HTML template</a></li>
<li class="chapter" data-level="D.9" data-path="methods.html"><a href="methods.html"><i class="fa fa-check"></i><b>D.9</b> Different building methods</a></li>
</ul></li>
<li class="chapter" data-level="E" data-path="personal-experience.html"><a href="personal-experience.html"><i class="fa fa-check"></i><b>E</b> Personal Experience</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://bookdown.org" target="_blank">Publicado con bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">blogdown: Creación de sitios web con R Markdown</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="jekyll" class="section level2">
<h2><span class="header-section-number">5.1</span> Jekyll</h2>
<p>For Jekyll (<a href="https://jekyllrb.com" class="uri">https://jekyllrb.com</a>) users, I have prepared a minimal example in the GitHub repository <a href="https://github.com/yihui/blogdown-jekyll">yihui/blogdown-jekyll.</a> If you clone or download this repository and open <code>blogdown-jekyll.Rproj</code> in RStudio, you can still use all addins mentioned in Section <a href="rstudio-ide.html#rstudio-ide">1.3</a>, such as “New Post,” “Serve Site,” and “Update Metadata,” but it is Jekyll instead of Hugo that builds the website behind the scenes now.</p>
<p>I assume you are familiar with Jekyll, and I’m not going to introduce the basics of Jekyll in this section. For example, you should know what the <code>_posts/</code> and <code>_site/</code> directories mean.</p>
<p>The key pieces of this <strong>blogdown-jekyll</strong> project are the files <code>.Rprofile</code>, <code>R/build.R</code>, and <code>R/build_one.R</code>. I have set some global R options for this project in <code>.Rprofile</code>:<a href="#fn40" class="footnote-ref" id="fnref40"><sup>40</sup></a></p>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb81-1" data-line-number="1"><span class="kw">options</span>(</a>
<a class="sourceLine" id="cb81-2" data-line-number="2">  <span class="dt">blogdown.generator =</span> <span class="st">&quot;jekyll&quot;</span>,</a>
<a class="sourceLine" id="cb81-3" data-line-number="3">  <span class="dt">blogdown.method =</span> <span class="st">&quot;custom&quot;</span>,</a>
<a class="sourceLine" id="cb81-4" data-line-number="4">  <span class="dt">blogdown.subdir =</span> <span class="st">&quot;_posts&quot;</span></a>
<a class="sourceLine" id="cb81-5" data-line-number="5">)</a></code></pre></div>
<p>First, the website generator was set to <code>jekyll</code> using the option <code>blogdown.generator</code>, so that <strong>blogdown</strong> knows that it should use Jekyll to build the site. Second, the build method <code>blogdown.method</code> was set to <code>custom</code>, so that we can define our custom R script <code>R/build.R</code> to build the Rmd files (I will explain the reason later). Third, the default subdirectory for new posts was set to <code>_posts</code>, which is Jekyll’s convention. After you set this option, the “New Post” addin will create new posts under the <code>_posts/</code> directory.</p>
<p>When the option <code>blogdown.method</code> is <code>custom</code>, <strong>blogdown</strong> will call the R script <code>R/build.R</code> to build the site. You have full freedom to do whatever you want in this script. Below is an example script:</p>
<div class="sourceCode" id="cb82"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb82-1" data-line-number="1">build_one =<span class="st"> </span><span class="cf">function</span>(io) {</a>
<a class="sourceLine" id="cb82-2" data-line-number="2">  <span class="co"># if output is not older than input, skip the compilation</span></a>
<a class="sourceLine" id="cb82-3" data-line-number="3">  <span class="cf">if</span> (<span class="op">!</span>blogdown<span class="op">:::</span><span class="kw">require_rebuild</span>(io[<span class="dv">2</span>], io[<span class="dv">1</span>])) <span class="kw">return</span>()</a>
<a class="sourceLine" id="cb82-4" data-line-number="4"></a>
<a class="sourceLine" id="cb82-5" data-line-number="5">  <span class="kw">message</span>(<span class="st">&#39;* knitting &#39;</span>, io[<span class="dv">1</span>])</a>
<a class="sourceLine" id="cb82-6" data-line-number="6">  <span class="cf">if</span> (blogdown<span class="op">:::</span><span class="kw">Rscript</span>(<span class="kw">shQuote</span>(<span class="kw">c</span>(<span class="st">&#39;R/build_one.R&#39;</span>, io))) <span class="op">!=</span><span class="st"> </span><span class="dv">0</span>) {</a>
<a class="sourceLine" id="cb82-7" data-line-number="7">    <span class="kw">unlink</span>(io[<span class="dv">2</span>])</a>
<a class="sourceLine" id="cb82-8" data-line-number="8">    <span class="kw">stop</span>(<span class="st">&#39;Failed to compile &#39;</span>, io[<span class="dv">1</span>], <span class="st">&#39; to &#39;</span>, io[<span class="dv">2</span>])</a>
<a class="sourceLine" id="cb82-9" data-line-number="9">  }</a>
<a class="sourceLine" id="cb82-10" data-line-number="10">}</a>
<a class="sourceLine" id="cb82-11" data-line-number="11"></a>
<a class="sourceLine" id="cb82-12" data-line-number="12"><span class="co"># Rmd files under the root directory</span></a>
<a class="sourceLine" id="cb82-13" data-line-number="13">rmds =<span class="st"> </span><span class="kw">list.files</span>(<span class="st">&#39;.&#39;</span>, <span class="st">&#39;[.]Rmd$&#39;</span>, <span class="dt">recursive =</span> T, <span class="dt">full.names =</span> T)</a>
<a class="sourceLine" id="cb82-14" data-line-number="14">files =<span class="st"> </span><span class="kw">cbind</span>(rmds, xfun<span class="op">::</span><span class="kw">with_ext</span>(rmds, <span class="st">&#39;.md&#39;</span>))</a>
<a class="sourceLine" id="cb82-15" data-line-number="15"></a>
<a class="sourceLine" id="cb82-16" data-line-number="16"><span class="cf">for</span> (i <span class="cf">in</span> <span class="kw">seq_len</span>(<span class="kw">nrow</span>(files))) <span class="kw">build_one</span>(files[i, ])</a>
<a class="sourceLine" id="cb82-17" data-line-number="17"></a>
<a class="sourceLine" id="cb82-18" data-line-number="18"><span class="kw">system2</span>(<span class="st">&#39;jekyll&#39;</span>, <span class="st">&#39;build&#39;</span>)</a></code></pre></div>
<ul>
<li><p>Basically it contains a function <code>build_one()</code> that takes an argument <code>io</code>, which is a character vector of length 2. The first element is the input (Rmd) filename, and the second element is the output filename.</p></li>
<li><p>Then we search for all Rmd files under the current directory, prepare the output filenames by substituting the Rmd file extensions with <code>.md</code>, and build the Rmd files one by one. Note there is a caching mechanism in <code>build_one()</code> that makes use of an internal <strong>blogdown</strong> function <code>require_rebuild()</code>. This function returns <code>FALSE</code> if the output file is not older than the input file in terms of the modification time. This can save you some time because those Rmd files that have been compiled before will not be compiled again every time. The key step in <code>build_one()</code> is to run the R script <code>R/build_one.R</code>, which we will explain later.</p></li>
<li><p>Lastly, we build the website through a system call of the command <code>jekyll build</code>.</p></li>
</ul>
<p>The script <code>R/build_one.R</code> looks like this (I have omitted some non-essential settings for simplicity):</p>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb83-1" data-line-number="1"><span class="kw">local</span>({</a>
<a class="sourceLine" id="cb83-2" data-line-number="2">  <span class="co"># fall back on &quot;/&quot; if baseurl is not specified</span></a>
<a class="sourceLine" id="cb83-3" data-line-number="3">  baseurl =<span class="st"> </span>blogdown<span class="op">:::</span><span class="kw">get_config2</span>(<span class="st">&quot;baseurl&quot;</span>, <span class="dt">default =</span> <span class="st">&quot;/&quot;</span>)</a>
<a class="sourceLine" id="cb83-4" data-line-number="4">  knitr<span class="op">::</span>opts_knit<span class="op">$</span><span class="kw">set</span>(<span class="dt">base.url =</span> baseurl)</a>
<a class="sourceLine" id="cb83-5" data-line-number="5">  knitr<span class="op">::</span><span class="kw">render_jekyll</span>()  <span class="co"># set output hooks</span></a>
<a class="sourceLine" id="cb83-6" data-line-number="6"></a>
<a class="sourceLine" id="cb83-7" data-line-number="7">  <span class="co"># input/output filenames as two arguments to Rscript</span></a>
<a class="sourceLine" id="cb83-8" data-line-number="8">  a =<span class="st"> </span><span class="kw">commandArgs</span>(<span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb83-9" data-line-number="9">  d =<span class="st"> </span><span class="kw">gsub</span>(<span class="st">&quot;^_|[.][a-zA-Z]+$&quot;</span>, <span class="st">&quot;&quot;</span>, a[<span class="dv">1</span>])</a>
<a class="sourceLine" id="cb83-10" data-line-number="10">  knitr<span class="op">::</span>opts_chunk<span class="op">$</span><span class="kw">set</span>(</a>
<a class="sourceLine" id="cb83-11" data-line-number="11">    <span class="dt">fig.path   =</span> <span class="kw">sprintf</span>(<span class="st">&quot;figure/%s/&quot;</span>, d),</a>
<a class="sourceLine" id="cb83-12" data-line-number="12">    <span class="dt">cache.path =</span> <span class="kw">sprintf</span>(<span class="st">&quot;cache/%s/&quot;</span>, d)</a>
<a class="sourceLine" id="cb83-13" data-line-number="13">  )</a>
<a class="sourceLine" id="cb83-14" data-line-number="14">  knitr<span class="op">::</span><span class="kw">knit</span>(</a>
<a class="sourceLine" id="cb83-15" data-line-number="15">    a[<span class="dv">1</span>], a[<span class="dv">2</span>], <span class="dt">quiet =</span> <span class="ot">TRUE</span>, <span class="dt">encoding =</span> <span class="st">&quot;UTF-8&quot;</span>,</a>
<a class="sourceLine" id="cb83-16" data-line-number="16">    <span class="dt">envir =</span> <span class="kw">globalenv</span>()</a>
<a class="sourceLine" id="cb83-17" data-line-number="17">  )</a>
<a class="sourceLine" id="cb83-18" data-line-number="18">})</a></code></pre></div>
<ul>
<li><p>The script is wrapped in <code>local()</code> so that an Rmd file is knitted in a clean global environment, and the variables such as <code>baseurl</code>, <code>a</code>, and <code>d</code> will not be created in the global environment, i.e., <code>globalenv()</code> used by <code>knitr::knit()</code> below.</p></li>
<li><p>The <strong>knitr</strong> package option <code>base.url</code> is a URL to be prepended to figure paths. We need to set this option to make sure figures generated from R code chunks can be found when they are displayed on a web page. A normal figure path is often like <code>figure/foo.png</code>, and it may not work when the image is rendered to an HTML file, because <code>figure/foo.png</code> is a relative path, and there is no guarantee that this image file will be copied to the directory of the final HTML file. For example, for an Rmd source file <code>_posts/2015-07-23-hello.Rmd</code> that generates <code>figure/foo.png</code> (under <code>_posts/</code>), the final HTML file may be <code>_site/2015/07/23/hello/index.html</code>. Jekyll knows how to render an HTML file to this location, but it does not understand the image dependency and will not copy the image file to this location. To solve this issue, we render figures at the root directory <code>/figure/</code>, which will be copied to <code>_site/</code> by Jekyll. To refer to an image under <code>_site/figure/</code>, we need the leading slash (<code>baseurl</code>), e.g., <code>&lt;img src=&quot;/figure/foo.png&quot;&gt;</code>. This is an absolute path, so no matter where the HTML is rendered, this path always works.</p></li>
<li><p>What <code>knitr::render_jekyll()</code> does is mainly to set up some <strong>knitr</strong> output hooks so that source code and text output from R code chunks will be wrapped in Liquid tags <code>{% highlight %}</code> and <code>{% end highlight %}</code>.</p></li>
<li><p>Remember in <code>build.R</code>, we passed the variable <code>io</code> to the Rscript call <code>blogdown:::Rscript</code>. Here in <code>build_one.R</code>, we can receive them from <code>commandArgs(TRUE)</code>. The variable <code>a</code> contains an <code>.Rmd</code> and an <code>.md</code> file path. We removed the possible leading underscore (<code>^_</code>) and the extension (<code>[.][a-zA-Z]$</code>) in the path. Next we set figure and cache paths using this string. For example, for a post <code>_posts/foo.Rmd</code>, its figures will be written to <code>figure/foo/</code> and its cache databases (if there are any) will be stored under <code>cache/foo/</code>. Both directories are under the root directory of the project.</p></li>
<li><p>Lastly, we call <code>knitr::knit()</code> to knit the Rmd file to a Markdown output file, which will be processed by Jekyll later.</p></li>
</ul>
<p>A small caveat is that since we have both <code>.Rmd</code> and <code>.md</code> files, Jekyll will treat both types of files as Markdown files by default. You have to ask Jekyll to ignore <code>.Rmd</code> files and only build <code>.md</code> files. You can set the option <code>exclude</code> in <code>_config.yml</code>:</p>
<div class="sourceCode" id="cb84"><pre class="sourceCode yaml"><code class="sourceCode yaml"><a class="sourceLine" id="cb84-1" data-line-number="1"><span class="fu">exclude:</span><span class="at"> </span><span class="kw">[</span><span class="st">&#39;*.Rmd&#39;</span><span class="kw">]</span></a></code></pre></div>
<p>Compared to the Hugo support in <strong>blogdown</strong>, this approach is limited in a few aspects:</p>
<ol style="list-style-type: decimal">
<li><p>It does not support Pandoc, so you cannot use Pandoc’s Markdown. Since it uses the <strong>knitr</strong> package instead of <strong>rmarkdown</strong>, you cannot use any of <strong>bookdown</strong>’s Markdown features, either. You are at the mercy of the Markdown renderers supported by Jekyll.</p></li>
<li><p>Without <strong>rmarkdown</strong>, you cannot use HTML widgets. Basically, all you can have are dynamic text output and R graphics output from R code chunks. They may or may not suffice, depending on your specific use cases.</p></li>
</ol>
<p>It may be possible for us to remove these limitations in a future version of <strong>blogdown</strong>, if there are enough happy Jekyll users in the R community.</p>
</div>
<div class="footnotes">
<hr />
<ol start="40">
<li id="fn40"><p>If you are not familiar with this file, please read Section <a href="#global-options"><strong>??</strong></a>.<a href="jekyll.html#fnref40" class="footnote-back">↩</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="other-generators.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="hexo.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook/js/app.min.js"></script>
<script src="libs/gitbook/js/lunr.js"></script>
<script src="libs/gitbook/js/plugin-search.js"></script>
<script src="libs/gitbook/js/plugin-sharing.js"></script>
<script src="libs/gitbook/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook/js/plugin-bookdown.js"></script>
<script src="libs/gitbook/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/mamaciasq/libro_blogdown05-custom.Rmd",
"text": "Edit"
},
"download": ["blogdown.pdf", "blogdown.epub"],
"toc": {
"collapse": "none"
}
});
});
</script>

</body>

</html>
